<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Get a data product"><title>Get a data product — mrp_get • mregions2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get a data product — mrp_get"><meta property="og:description" content="Get a data product"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mregions2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/mregions2.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/mregions2-rdf.html">mregions2 as RDF</a>
    <a class="dropdown-item" href="../articles/why_mregions2.html">Why mregions and mregions2?</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/lifewatch/mregions2/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Get a data product</h1>
      <small class="dont-index">Source: <a href="https://github.com/lifewatch/mregions2/blob/HEAD/R/08_mrp_get.R" class="external-link"><code>R/08_mrp_get.R</code></a></small>
      <div class="d-none name"><code>mrp_get.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Get a data product</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mrp_get</span><span class="op">(</span><span class="va">layer</span>, cql_filter <span class="op">=</span> <span class="cn">NULL</span>, filter <span class="op">=</span> <span class="cn">NULL</span>, count <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>layer</dt>
<dd><p>(character) Identifier of the data product. See <a href="mrp_list.html">mrp_list</a></p></dd>


<dt>cql_filter</dt>
<dd><p>(character) Contextual Query Language (CQL) filter. See details.</p></dd>


<dt>filter</dt>
<dd><p>(character) Standard OGC filter specification. See details.</p></dd>


<dt>count</dt>
<dd><p>(numeric) Maximum number of features to be retrieved.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An sf object with the Marine Regions data product</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function uses <a href="https://en.wikipedia.org/wiki/Web_Map_Service" class="external-link">WMS services</a> to load quickly
a Leaflet viewer of a Marine Regions data product. It uses the <a href="https://emodnet.ec.europa.eu/en" class="external-link">EMODnet Bathymetry</a> Digital Terrain Model as background layer.</p><div class="section">
<h3 id="filters">Filters<a class="anchor" aria-label="anchor" href="#filters"></a></h3>


<p>Both the <a href="https://portal.ogc.org/files/96288" class="external-link">Contextual Query Language (CQL) filter</a> and the <a href="https://www.ogc.org/standard/filter/" class="external-link">standard OGC filter specification</a> allow to
query the server before performing a request. This will boost performance as you will only retrieve the area of your interest. It is possible to query on attributes, but also perform
geospatial queries. For instance, you can query a bounding box of interest.</p>
<p>CQL filters are possible only in geoserver. Marine Regions uses a geoserver instance to serve its data products.
A tutorial on CQL filters is available in the <a href="https://docs.geoserver.org/stable/en/user/tutorials/cql/cql_tutorial.html" class="external-link">geoserver web site</a>.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="mrp_list.html">mrp_list</a> to describe the list of products, <code><a href="mrp_view.html">mrp_view()</a></code> to visualize the data product in advance, <code><a href="mrp_colnames.html">mrp_colnames()</a></code> and <code><a href="mrp_col_unique.html">mrp_col_unique()</a></code> to get the name, data type and unique values of a the columns of a data product, useful to query
with the arguments <code>cql_filter</code> or <code>filter</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># See the list of all data products</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">mrp_list</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We want the Exclusive Economic Zones of Portugal. Let's first visualize the product:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="mrp_view.html">mrp_view</a></span><span class="op">(</span><span class="st">"eez"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># See all the columns on this data product</span></span></span>
<span class="r-in"><span><span class="fu"><a href="mrp_colnames.html">mrp_colnames</a></span><span class="op">(</span><span class="st">"eez"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We should query on sovereign</span></span></span>
<span class="r-in"><span><span class="co"># See all the possible values of sovereign1, sovereign2 and sovereign3</span></span></span>
<span class="r-in"><span><span class="va">sov1</span> <span class="op">=</span> <span class="fu"><a href="mrp_col_unique.html">mrp_col_unique</a></span><span class="op">(</span><span class="st">"eez"</span>, <span class="st">"sovereign1"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sov2</span> <span class="op">=</span> <span class="fu"><a href="mrp_col_unique.html">mrp_col_unique</a></span><span class="op">(</span><span class="st">"eez"</span>, <span class="st">"sovereign2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sov3</span> <span class="op">=</span> <span class="fu"><a href="mrp_col_unique.html">mrp_col_unique</a></span><span class="op">(</span><span class="st">"eez"</span>, <span class="st">"sovereign3"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Is Portugal a value in the sovereign1, 2 and 3?</span></span></span>
<span class="r-in"><span><span class="st">"Portugal"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">sov1</span></span></span>
<span class="r-in"><span><span class="co">#&gt; [1] TRUE</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="st">"Portugal"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">sov2</span></span></span>
<span class="r-in"><span><span class="co">#&gt; [1] FALSE</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="st">"Portugal"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">sov3</span></span></span>
<span class="r-in"><span><span class="co">#&gt; [1] FALSE</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Portugal is only in sovereign1. Let's write a CQL filter to get only</span></span></span>
<span class="r-in"><span><span class="co"># the EEZs of Portugal, or those where Portugal is a party of a dispute or a joint regime</span></span></span>
<span class="r-in"><span><span class="va">portugal_eez</span> <span class="op">&lt;-</span> <span class="fu">mrp_get</span><span class="op">(</span><span class="st">"eez"</span>, cql_filter <span class="op">=</span> <span class="st">"sovereign1 = 'Portugal'"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># You can also limit the number of features to be requested</span></span></span>
<span class="r-in"><span><span class="fu">mrp_get</span><span class="op">(</span><span class="st">"eez"</span>, count <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Salvador Fernandez-Bejarano, Lotte Pohl, <a href="https://lifewatch.be" class="external-link"><img src="https://www.lifewatch.be/sites/lifewatch.be/themes/lifewatchportal/images/header_lw_logo.png" width="72"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

