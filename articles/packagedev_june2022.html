<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="mregions2">
<title>mregions2 package development info • mregions2</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="mregions2 package development info">
<meta property="og:description" content="mregions2">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mregions2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/packagedev_june2022.html">mregions2 package development info</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="packagedev_june2022_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>mregions2 package development info</h1>
            
      
      
      <div class="d-none name"><code>packagedev_june2022.Rmd</code></div>
    </div>

    
    
<p>This vignette serves to document the status of the <code>mregions2</code> package development process in June, 2022 after the IMBRSea professional practice internship of <span class="citation">@whaleshark99</span> at VLIZ, Belgium.</p>
<div class="section level2">
<h2 id="package-structure">package structure<a class="anchor" aria-label="anchor" href="#package-structure"></a>
</h2>
<p>All relevant functions from the gazetteer webservices are in <code>mr_gaz_records.R</code>. All of them contain assertions from the <code>checkmate</code>-package. Assertions are not claimed to be complete so it might be good to check that assertions are there for each step.</p>
<p>Tests with the <code>testthat</code>-package were started with but definetely have to be completed/altered.</p>
<p>I most recently worked in the branch <code>dev_OOP</code> that I did not merge into <code>main</code>. On this branch I created the class <code>MarineRegion</code> using the <code>R6</code>-package. On this branch, there is a function called <code>mr_gaz_relations_full_by_MRGID</code> in <code>mr_gaz_records.R</code>, which does not use the webservices but fetches the relations from the open-linked data through <code><a href="../reference/mr_gaz_ldes.html">mr_gaz_ldes()</a></code>. This might be useful to include in the general package. The function is included at the very end of the vignette.</p>
</div>
<div class="section level2">
<h2 id="wrapup-meeting-01-06-2022">wrapup meeting 01.06.2022<a class="anchor" aria-label="anchor" href="#wrapup-meeting-01-06-2022"></a>
</h2>
<div class="section level3">
<h3 id="points-of-discussion">points of discussion<a class="anchor" aria-label="anchor" href="#points-of-discussion"></a>
</h3>
<ul>
<li>remove <code>_gaz_</code> in function names?</li>
<li>
</ul>
</div>
<div class="section level3">
<h3 id="agreed-changes">agreed changes<a class="anchor" aria-label="anchor" href="#agreed-changes"></a>
</h3>
<div class="section level4">
<h4 id="conventional-approach">conventional approach<a class="anchor" aria-label="anchor" href="#conventional-approach"></a>
</h4>
<ul>
<li>
<input type="checkbox" disabled>
rename <code><a href="../reference/mr_gaz_ldes.html">mr_gaz_ldes()</a></code> to something more informative. Potentially display information in a clearer (i.e. less nested) way.</li>
</ul>
</div>
<div class="section level4">
<h4 id="object-oriented-programming-oop-approach">Object Oriented Programming (OOP) approach<a class="anchor" aria-label="anchor" href="#object-oriented-programming-oop-approach"></a>
</h4>
<ul>
<li>
<input type="checkbox" disabled>
rename <code>mr_marine_region()</code> to <code>mr_GeoObject()</code> and the class <code>MarineRegion</code> to <code>GeoObject</code>.</li>
<li>
<input type="checkbox" disabled>
remove <code>area</code> in the object creation of <code>mr_marine_region()</code>
</li>
<li>
<input type="checkbox" disabled>
change the description of a <code>marine_region</code> in the RStudio environment (now its <code>R6 Object containing active binding0</code>)</li>
</ul>
</div>
</div>
</div>
<div class="section level2">
<h2 id="next-steps">Next Steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<ul>
<li>
<input type="checkbox" disabled>
explore and include lazy loading</li>
<li>
<input type="checkbox" disabled><code>mr_gaz_relations_full_by_MRGID()</code>: change the way a relation is retrieved from <code><a href="../reference/mr_gaz_ldes.html">mr_gaz_ldes()</a></code>.</li>
<li>
<input type="checkbox" disabled>
make CRS accessible in <code><a href="../reference/mr_gaz_geometry.html">mr_gaz_geometry()</a></code>
</li>
<li>
<input type="checkbox" disabled>
print comprehensible error message when PC is not connected to internet. I started with this in <code>test-mr_gaz_records.R</code> but the test does not make much sense just yet.</li>
<li>
<input type="checkbox" disabled>
include sth that checks the language of a gazetteer entry</li>
<li>
<input type="checkbox" disabled>
make clearer function name for <code><a href="../reference/mr_gaz_record.html">mr_gaz_record()</a></code>. Here, the user fetches the geometry (if existent). Transport this information through the function name, e.g. by changing the name to <code>mr_gaz_record_geom()</code>?</li>
</ul>
</div>
<div class="section level2">
<h2 id="things-that-i-think-could-be-nice-in-the-package">Things that I think could be nice in the package<a class="anchor" aria-label="anchor" href="#things-that-i-think-could-be-nice-in-the-package"></a>
</h2>
<ul>
<li>
<input type="checkbox" disabled>
enable km radius in <code>getGazetteerRecordsByLatLong</code>. At the moment, a lat_radius and lon_radius of 0 gives 100 results (the max retrievable number) because its units are in degrees.</li>
<li>
<input type="checkbox" disabled>
create a wrapper function of existing webservice functions that lets the user specify more attributes of a gazetteer record, e.g. <code>name == "France" &amp; placeType == "Nation" &amp; language == "English"</code>. Yes, this can also be done in an additional step by the user itself but could speed up the workflow of retrieving a record.</li>
<li>
<input type="checkbox" disabled>
add column to a gazetteer record that specifies if that record has a geometry or not. <code>mr_has_geometry()</code> already exists but it might be helpful to give that information to the user directly without requiring them to know this function. In addition, it might prevent confusion when someone tries to get a geometry and an error is thrown.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' Get all Relations for a Marine Gazetteer Record</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @param mrgid The Marine Regions Geographic IDentifier.</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @return A `tibble` with all records that are related. The column `relation` contains the type of relation.</span></span>
<span><span class="co">#' Explanations of the relation types can be found at: \url{https://marineregions.org/ontology/documentation.html#objectproperties}.</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="co">#' @examples</span></span>
<span><span class="co">#' belgium_mrgid &lt;- 14</span></span>
<span><span class="co">#' belgium_relations &lt;- mr_gaz_relations_full_by_MRGID(belgium_mrgid)</span></span>
<span><span class="va">mr_gaz_relations_full_by_MRGID</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">mrgid</span><span class="op">)</span><span class="op">{</span></span>
<span></span>
<span>  <span class="va">record</span> <span class="op">&lt;-</span> <span class="fu">mregions2</span><span class="fu">::</span><span class="fu"><a href="../reference/mr_gaz_ldes.html">mr_gaz_ldes</a></span><span class="op">(</span><span class="va">mrgid</span>, type <span class="op">=</span> <span class="st">"list"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">relations</span> <span class="op">=</span> <span class="va">record</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"mr:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">record</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span>  <span class="kw">if</span><span class="op">(</span><span class="st">"mr:hasGeometry"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">relations</span><span class="op">)</span><span class="op">)</span> <span class="va">relations</span><span class="op">[[</span><span class="st">"mr:hasGeometry"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">relations</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">j</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">relations</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">relative_url</span> <span class="op">&lt;-</span> <span class="va">relations</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="va">j</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"@id"</span><span class="op">]</span><span class="op">]</span></span>
<span>      <span class="va">relative_mrgid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"http://marineregions.org/mrgid/"</span>, <span class="st">""</span>, <span class="va">relative_url</span><span class="op">)</span></span>
<span>      <span class="va">relative_mrgid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">relative_mrgid</span><span class="op">)</span></span>
<span>      <span class="va">temp_res_j</span> <span class="op">&lt;-</span> <span class="fu">mregions2</span><span class="fu">::</span><span class="fu"><a href="../reference/mr_gaz_record.html">mr_gaz_record</a></span><span class="op">(</span><span class="va">relative_mrgid</span>, add_geometry <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>      <span class="va">temp_res_j</span><span class="op">$</span><span class="va">relation</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"mr:"</span>, <span class="st">""</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">relations</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">j</span> <span class="op">==</span> <span class="fl">1</span>,</span>
<span>             <span class="va">res_j</span> <span class="op">&lt;-</span> <span class="va">temp_res_j</span>,</span>
<span>             <span class="va">res_j</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">res_j</span>, <span class="va">temp_res_j</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">i</span> <span class="op">==</span> <span class="fl">1</span>,</span>
<span>           <span class="va">res</span> <span class="op">&lt;-</span> <span class="va">res_j</span>,</span>
<span>           <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">res</span>, <span class="va">res_j</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># TODO: add assertions and unit tests</span></span>
<span>  <span class="co"># TODO: turn for loops into lapply functions</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Lotte Pohl, Salvador Fernandez, <a href="https://lifewatch.be" class="external-link"><img src="https://www.lifewatch.be/sites/lifewatch.be/themes/lifewatchportal/images/header_lw_logo.png" width="72"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
